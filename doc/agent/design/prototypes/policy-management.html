<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Karmada-Manager - 策略管理</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'karmada-blue': '#1B4F72',
                        'karmada-light': '#3498DB',
                        'karmada-green': '#27AE60',
                        'karmada-orange': '#F39C12',
                        'karmada-red': '#E74C3C'
                    }
                }
            }
        }
    </script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .sidebar {
            width: 280px;
            min-height: 100vh;
            background: linear-gradient(180deg, #1B4F72 0%, #2C3E50 100%);
        }
        .main-content {
            margin-left: 280px;
            min-height: 100vh;
            background: #f8fafc;
        }
        .policy-card {
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }
        .policy-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }
        .policy-card.propagation {
            border-left-color: #1B4F72;
        }
        .policy-card.override {
            border-left-color: #F39C12;
        }
        .policy-card.cluster {
            border-left-color: #27AE60;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .tab-button.active {
            background-color: #1B4F72;
            color: white;
        }
        .yaml-editor {
            background: #1e1e1e;
            color: #d4d4d4;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            border-radius: 8px;
            padding: 16px;
            max-height: 400px;
            overflow-y: auto;
        }
    </style>
</head>
<body class="bg-gray-100">
    <!-- 侧边栏 -->
    <div class="sidebar fixed left-0 top-0 text-white shadow-xl z-10">
        <div class="p-6 border-b border-blue-600">
            <div class="flex items-center">
                <i class="fas fa-cubes text-3xl text-blue-300 mr-3"></i>
                <div>
                    <h1 class="text-xl font-bold">Karmada-Manager</h1>
                    <p class="text-blue-300 text-sm">多集群管理平台</p>
                </div>
            </div>
        </div>

        <nav class="mt-6">
            <a href="overview.html" class="flex items-center px-6 py-3 hover:bg-blue-600 hover:bg-opacity-30 transition-colors">
                <i class="fas fa-tachometer-alt w-5 mr-3"></i>
                <span>系统概览</span>
            </a>
            <a href="clusters.html" class="flex items-center px-6 py-3 hover:bg-blue-600 hover:bg-opacity-30 transition-colors">
                <i class="fas fa-cubes w-5 mr-3"></i>
                <span>集群管理</span>
            </a>
            <a href="workload-scheduling.html" class="flex items-center px-6 py-3 hover:bg-blue-600 hover:bg-opacity-30 transition-colors">
                <i class="fas fa-project-diagram w-5 mr-3"></i>
                <span>调度可视化</span>
            </a>
            <a href="policy-management.html" class="flex items-center px-6 py-3 bg-blue-600 bg-opacity-50 border-r-4 border-blue-300">
                <i class="fas fa-shield-alt w-5 mr-3"></i>
                <span class="font-medium">策略管理</span>
            </a>
            <div class="px-6 py-2 text-blue-300 text-sm font-medium mt-8">
                成员集群
            </div>
            <a href="cluster-detail.html" class="flex items-center px-6 py-2 hover:bg-blue-600 hover:bg-opacity-30 transition-colors text-sm">
                <i class="fas fa-server w-4 mr-3 text-green-400"></i>
                <span>master</span>
                <span class="ml-auto text-xs bg-green-500 px-2 py-1 rounded">Ready</span>
            </a>
            <a href="#" class="flex items-center px-6 py-2 hover:bg-blue-600 hover:bg-opacity-30 transition-colors text-sm">
                <i class="fas fa-server w-4 mr-3 text-green-400"></i>
                <span>branch</span>
                <span class="ml-auto text-xs bg-green-500 px-2 py-1 rounded">Ready</span>
            </a>
        </nav>

        <div class="absolute bottom-6 left-6 right-6">
            <div class="bg-blue-600 bg-opacity-30 rounded-lg p-4">
                <div class="flex items-center mb-2">
                    <i class="fas fa-user-circle mr-2"></i>
                    <span class="font-medium">张伟</span>
                </div>
                <div class="text-blue-300 text-sm">平台运维工程师</div>
            </div>
        </div>
    </div>

    <!-- 主内容区域 -->
    <div class="main-content">
        <!-- 顶部导航栏 -->
        <header class="bg-white shadow-sm border-b px-6 py-4">
            <div class="flex justify-between items-center">
                <div>
                    <h2 class="text-2xl font-bold text-gray-800">策略管理</h2>
                    <p class="text-gray-600">管理 Karmada 的传播策略、覆盖策略和集群策略</p>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="flex items-center text-sm text-gray-600">
                        <i class="fas fa-shield-alt mr-2"></i>
                        <span>活跃策略: 8</span>
                    </div>
                    <div class="relative">
                        <button onclick="toggleCreateMenu()" class="bg-karmada-green text-white px-4 py-2 rounded-lg hover:bg-green-600 transition-colors">
                            <i class="fas fa-plus mr-2"></i>创建策略
                        </button>
                        <div id="createMenu" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 z-20">
                            <a href="#" onclick="createPolicy('propagation')" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                                <i class="fas fa-share-alt mr-2 text-karmada-blue"></i>传播策略
                            </a>
                            <a href="#" onclick="createPolicy('override')" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                                <i class="fas fa-edit mr-2 text-karmada-orange"></i>覆盖策略
                            </a>
                            <a href="#" onclick="createPolicy('cluster')" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                                <i class="fas fa-globe mr-2 text-karmada-green"></i>集群策略
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- 主要内容 -->
        <main class="p-6">
            <!-- 策略统计概览 -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-6">
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-gray-600 text-sm">总策略数</p>
                            <p class="text-3xl font-bold text-karmada-blue">8</p>
                        </div>
                        <div class="bg-blue-100 p-3 rounded-full">
                            <i class="fas fa-shield-alt text-2xl text-karmada-blue"></i>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow-lg p-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-gray-600 text-sm">传播策略</p>
                            <p class="text-3xl font-bold text-blue-600">5</p>
                        </div>
                        <div class="bg-blue-100 p-3 rounded-full">
                            <i class="fas fa-share-alt text-2xl text-blue-600"></i>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow-lg p-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-gray-600 text-sm">覆盖策略</p>
                            <p class="text-3xl font-bold text-orange-600">2</p>
                        </div>
                        <div class="bg-orange-100 p-3 rounded-full">
                            <i class="fas fa-edit text-2xl text-orange-600"></i>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow-lg p-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-gray-600 text-sm">集群策略</p>
                            <p class="text-3xl font-bold text-green-600">1</p>
                        </div>
                        <div class="bg-green-100 p-3 rounded-full">
                            <i class="fas fa-globe text-2xl text-green-600"></i>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 搜索和过滤 -->
            <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                <div class="flex flex-col md:flex-row gap-4">
                    <div class="flex-1">
                        <div class="relative">
                            <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                            <input 
                                type="text" 
                                placeholder="搜索策略名称、命名空间或标签..."
                                class="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-karmada-blue"
                                id="searchInput"
                            >
                        </div>
                    </div>

                    <div class="flex gap-2">
                        <select class="px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-karmada-blue">
                            <option value="">所有类型</option>
                            <option value="propagation">传播策略</option>
                            <option value="override">覆盖策略</option>
                            <option value="cluster">集群策略</option>
                        </select>
                        
                        <select class="px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-karmada-blue">
                            <option value="">所有状态</option>
                            <option value="active">生效中</option>
                            <option value="pending">待生效</option>
                            <option value="error">错误</option>
                        </select>

                        <button class="bg-karmada-blue text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors">
                            <i class="fas fa-filter mr-2"></i>筛选
                        </button>
                    </div>
                </div>
            </div>

            <!-- 策略列表 -->
            <div class="bg-white rounded-xl shadow-lg overflow-hidden">
                <div class="px-6 py-4 border-b border-gray-200">
                    <h3 class="text-xl font-bold text-gray-800">策略列表</h3>
                </div>

                <!-- 策略卡片 1 - nginx-propagation -->
                <div class="policy-card propagation border-b border-gray-200 hover:bg-gray-50 transition-colors">
                    <div class="px-6 py-6">
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center">
                                <i class="fas fa-share-alt text-karmada-blue text-xl mr-4"></i>
                                <div>
                                    <h4 class="text-lg font-bold text-gray-800">nginx-propagation</h4>
                                    <p class="text-sm text-gray-600">命名空间: default • 类型: PropagationPolicy</p>
                                </div>
                            </div>
                            <div class="flex items-center space-x-3">
                                <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium">生效中</span>
                                <div class="flex space-x-2">
                                    <button onclick="editPolicy('nginx-propagation')" class="text-karmada-blue hover:text-blue-700 transition-colors" title="编辑">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button onclick="viewPolicyYaml('nginx-propagation')" class="text-gray-500 hover:text-gray-700 transition-colors" title="查看YAML">
                                        <i class="fas fa-code"></i>
                                    </button>
                                    <button onclick="deletePolicy('nginx-propagation')" class="text-red-500 hover:text-red-700 transition-colors" title="删除">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-4">
                            <div>
                                <h6 class="text-sm font-medium text-gray-600 mb-1">资源选择器</h6>
                                <p class="text-sm text-gray-800">nginx-deployment</p>
                            </div>
                            <div>
                                <h6 class="text-sm font-medium text-gray-600 mb-1">目标集群</h6>
                                <p class="text-sm text-gray-800">master, branch</p>
                            </div>
                            <div>
                                <h6 class="text-sm font-medium text-gray-600 mb-1">分配策略</h6>
                                <p class="text-sm text-gray-800">Static (3:2)</p>
                            </div>
                            <div>
                                <h6 class="text-sm font-medium text-gray-600 mb-1">创建时间</h6>
                                <p class="text-sm text-gray-800">2025-05-19 14:32:15</p>
                            </div>
                        </div>

                        <div class="flex items-center space-x-4 text-sm">
                            <div class="flex items-center text-green-600">
                                <i class="fas fa-check-circle mr-2"></i>
                                <span>已应用到 2 个集群</span>
                            </div>
                            <div class="flex items-center text-blue-600">
                                <i class="fas fa-cubes mr-2"></i>
                                <span>管理 5 个副本</span>
                            </div>
                            <div class="flex items-center text-purple-600">
                                <i class="fas fa-clock mr-2"></i>
                                <span>最后更新: 2小时前</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 策略卡片 2 - web-app-propagation -->
                <div class="policy-card propagation border-b border-gray-200 hover:bg-gray-50 transition-colors">
                    <div class="px-6 py-6">
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center">
                                <i class="fas fa-share-alt text-karmada-blue text-xl mr-4"></i>
                                <div>
                                    <h4 class="text-lg font-bold text-gray-800">web-app-propagation</h4>
                                    <p class="text-sm text-gray-600">命名空间: production • 类型: PropagationPolicy</p>
                                </div>
                            </div>
                            <div class="flex items-center space-x-3">
                                <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium">生效中</span>
                                <div class="flex space-x-2">
                                    <button onclick="editPolicy('web-app-propagation')" class="text-karmada-blue hover:text-blue-700 transition-colors" title="编辑">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button onclick="viewPolicyYaml('web-app-propagation')" class="text-gray-500 hover:text-gray-700 transition-colors" title="查看YAML">
                                        <i class="fas fa-code"></i>
                                    </button>
                                    <button onclick="deletePolicy('web-app-propagation')" class="text-red-500 hover:text-red-700 transition-colors" title="删除">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-4">
                            <div>
                                <h6 class="text-sm font-medium text-gray-600 mb-1">资源选择器</h6>
                                <p class="text-sm text-gray-800">web-app-deployment</p>
                            </div>
                            <div>
                                <h6 class="text-sm font-medium text-gray-600 mb-1">目标集群</h6>
                                <p class="text-sm text-gray-800">master</p>
                            </div>
                            <div>
                                <h6 class="text-sm font-medium text-gray-600 mb-1">分配策略</h6>
                                <p class="text-sm text-gray-800">Dynamic</p>
                            </div>
                            <div>
                                <h6 class="text-sm font-medium text-gray-600 mb-1">创建时间</h6>
                                <p class="text-sm text-gray-800">2025-05-19 10:15:42</p>
                            </div>
                        </div>

                        <div class="flex items-center space-x-4 text-sm">
                            <div class="flex items-center text-green-600">
                                <i class="fas fa-check-circle mr-2"></i>
                                <span>已应用到 1 个集群</span>
                            </div>
                            <div class="flex items-center text-blue-600">
                                <i class="fas fa-cubes mr-2"></i>
                                <span>管理 3 个副本</span>
                            </div>
                            <div class="flex items-center text-purple-600">
                                <i class="fas fa-clock mr-2"></i>
                                <span>最后更新: 6小时前</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 策略卡片 3 - nginx-override -->
                <div class="policy-card override border-b border-gray-200 hover:bg-gray-50 transition-colors">
                    <div class="px-6 py-6">
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center">
                                <i class="fas fa-edit text-karmada-orange text-xl mr-4"></i>
                                <div>
                                    <h4 class="text-lg font-bold text-gray-800">nginx-override</h4>
                                    <p class="text-sm text-gray-600">命名空间: default • 类型: OverridePolicy</p>
                                </div>
                            </div>
                            <div class="flex items-center space-x-3">
                                <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium">生效中</span>
                                <div class="flex space-x-2">
                                    <button onclick="editPolicy('nginx-override')" class="text-karmada-blue hover:text-blue-700 transition-colors" title="编辑">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button onclick="viewPolicyYaml('nginx-override')" class="text-gray-500 hover:text-gray-700 transition-colors" title="查看YAML">
                                        <i class="fas fa-code"></i>
                                    </button>
                                    <button onclick="deletePolicy('nginx-override')" class="text-red-500 hover:text-red-700 transition-colors" title="删除">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-4">
                            <div>
                                <h6 class="text-sm font-medium text-gray-600 mb-1">资源选择器</h6>
                                <p class="text-sm text-gray-800">nginx-deployment</p>
                            </div>
                            <div>
                                <h6 class="text-sm font-medium text-gray-600 mb-1">目标集群</h6>
                                <p class="text-sm text-gray-800">branch</p>
                            </div>
                            <div>
                                <h6 class="text-sm font-medium text-gray-600 mb-1">覆盖类型</h6>
                                <p class="text-sm text-gray-800">Image Tag</p>
                            </div>
                            <div>
                                <h6 class="text-sm font-medium text-gray-600 mb-1">创建时间</h6>
                                <p class="text-sm text-gray-800">2025-05-19 15:20:18</p>
                            </div>
                        </div>

                        <div class="flex items-center space-x-4 text-sm">
                            <div class="flex items-center text-green-600">
                                <i class="fas fa-check-circle mr-2"></i>
                                <span>已应用覆盖规则</span>
                            </div>
                            <div class="flex items-center text-orange-600">
                                <i class="fas fa-tag mr-2"></i>
                                <span>镜像标签: development</span>
                            </div>
                            <div class="flex items-center text-purple-600">
                                <i class="fas fa-clock mr-2"></i>
                                <span>最后更新: 1小时前</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 策略卡片 4 - global-cluster-policy -->
                <div class="policy-card cluster border-b border-gray-200 hover:bg-gray-50 transition-colors">
                    <div class="px-6 py-6">
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center">
                                <i class="fas fa-globe text-karmada-green text-xl mr-4"></i>
                                <div>
                                    <h4 class="text-lg font-bold text-gray-800">global-cluster-policy</h4>
                                    <p class="text-sm text-gray-600">类型: ClusterPropagationPolicy</p>
                                </div>
                            </div>
                            <div class="flex items-center space-x-3">
                                <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium">生效中</span>
                                <div class="flex space-x-2">
                                    <button onclick="editPolicy('global-cluster-policy')" class="text-karmada-blue hover:text-blue-700 transition-colors" title="编辑">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button onclick="viewPolicyYaml('global-cluster-policy')" class="text-gray-500 hover:text-gray-700 transition-colors" title="查看YAML">
                                        <i class="fas fa-code"></i>
                                    </button>
                                    <button onclick="deletePolicy('global-cluster-policy')" class="text-red-500 hover:text-red-700 transition-colors" title="删除">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-4">
                            <div>
                                <h6 class="text-sm font-medium text-gray-600 mb-1">资源选择器</h6>
                                <p class="text-sm text-gray-800">ClusterRole, ClusterRoleBinding</p>
                            </div>
                            <div>
                                <h6 class="text-sm font-medium text-gray-600 mb-1">目标集群</h6>
                                <p class="text-sm text-gray-800">所有集群</p>
                            </div>
                            <div>
                                <h6 class="text-sm font-medium text-gray-600 mb-1">分配策略</h6>
                                <p class="text-sm text-gray-800">ReplicaScheduling</p>
                            </div>
                            <div>
                                <h6 class="text-sm font-medium text-gray-600 mb-1">创建时间</h6>
                                <p class="text-sm text-gray-800">2025-05-19 09:45:12</p>
                            </div>
                        </div>

                        <div class="flex items-center space-x-4 text-sm">
                            <div class="flex items-center text-green-600">
                                <i class="fas fa-check-circle mr-2"></i>
                                <span>已应用到 2 个集群</span>
                            </div>
                            <div class="flex items-center text-green-600">
                                <i class="fas fa-shield-alt mr-2"></i>
                                <span>管理集群级别资源</span>
                            </div>
                            <div class="flex items-center text-purple-600">
                                <i class="fas fa-clock mr-2"></i>
                                <span>最后更新: 8小时前</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 分页 -->
                <div class="px-6 py-4 bg-gray-50 flex justify-between items-center">
                    <div class="text-sm text-gray-600">
                        显示第 1-4 项，共 8 项结果
                    </div>
                    <div class="flex items-center space-x-2">
                        <button class="px-3 py-1 border border-gray-300 rounded bg-white text-gray-500 cursor-not-allowed">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <button class="px-3 py-1 border border-karmada-blue bg-karmada-blue text-white rounded">
                            1
                        </button>
                        <button class="px-3 py-1 border border-gray-300 rounded bg-white text-gray-700 hover:bg-gray-50">
                            2
                        </button>
                        <button class="px-3 py-1 border border-gray-300 rounded bg-white text-gray-700 hover:bg-gray-50">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- 策略详情模态框 -->
    <div id="policyModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-xl shadow-2xl max-w-4xl w-full mx-4 max-h-screen overflow-hidden">
            <div class="flex justify-between items-center p-6 border-b border-gray-200">
                <h3 class="text-xl font-bold text-gray-800" id="modalTitle">策略详情</h3>
                <button onclick="closeModal()" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            
            <div class="p-6 overflow-y-auto max-h-96">
                <div class="yaml-editor" id="modalContent">
                    <!-- YAML内容将在这里显示 -->
                </div>
            </div>
            
            <div class="flex justify-end space-x-3 p-6 border-t border-gray-200">
                <button onclick="closeModal()" class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50">
                    关闭
                </button>
                <button class="px-4 py-2 bg-karmada-blue text-white rounded-lg hover:bg-blue-700">
                    编辑策略
                </button>
            </div>
        </div>
    </div>

    <script>
        // 搜索功能
        document.getElementById('searchInput').addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            const policyCards = document.querySelectorAll('.policy-card');
            
            policyCards.forEach(card => {
                const policyName = card.querySelector('h4').textContent.toLowerCase();
                if (policyName.includes(searchTerm)) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        });

        // 切换创建菜单
        function toggleCreateMenu() {
            const menu = document.getElementById('createMenu');
            menu.classList.toggle('hidden');
        }

        // 点击外部关闭菜单
        document.addEventListener('click', function(e) {
            const menu = document.getElementById('createMenu');
            const button = e.target.closest('button');
            if (!menu.contains(e.target) && !button?.textContent.includes('创建策略')) {
                menu.classList.add('hidden');
            }
        });

        // 创建策略
        function createPolicy(type) {
            const typeNames = {
                'propagation': '传播策略',
                'override': '覆盖策略',
                'cluster': '集群策略'
            };
            alert(`创建新的${typeNames[type]}`);
            document.getElementById('createMenu').classList.add('hidden');
        }

        // 编辑策略
        function editPolicy(policyName) {
            alert(`编辑策略: ${policyName}`);
        }

        // 查看策略YAML
        function viewPolicyYaml(policyName) {
            const yamlContent = {
                'nginx-propagation': `apiVersion: policy.karmada.io/v1alpha1
kind: PropagationPolicy
metadata:
  name: nginx-propagation
  namespace: default
spec:
  resourceSelectors:
  - apiVersion: apps/v1
    kind: Deployment
    name: nginx-deployment
  placement:
    clusterAffinity:
      clusterNames:
      - master
      - branch
    replicaScheduling:
      replicaDivisionPreference: Static
      replicaSchedulingType: Divided
      staticWeightList:
      - targetCluster:
          clusterNames:
          - master
        weight: 3
      - targetCluster:
          clusterNames:
          - branch
        weight: 2`,
                'nginx-override': `apiVersion: policy.karmada.io/v1alpha1
kind: OverridePolicy
metadata:
  name: nginx-override
  namespace: default
spec:
  resourceSelectors:
  - apiVersion: apps/v1
    kind: Deployment
    name: nginx-deployment
  targetCluster:
    clusterNames:
    - branch
  overriders:
    imageOverrider:
    - component: Registry
      operator: replace
      value: registry.example.com
    - component: Tag
      operator: replace
      value: development`,
                'web-app-propagation': `apiVersion: policy.karmada.io/v1alpha1
kind: PropagationPolicy
metadata:
  name: web-app-propagation
  namespace: production
spec:
  resourceSelectors:
  - apiVersion: apps/v1
    kind: Deployment
    name: web-app-deployment
  placement:
    clusterAffinity:
      clusterNames:
      - master
    replicaScheduling:
      replicaDivisionPreference: Weighted
      replicaSchedulingType: Divided`,
                'global-cluster-policy': `apiVersion: policy.karmada.io/v1alpha1
kind: ClusterPropagationPolicy
metadata:
  name: global-cluster-policy
spec:
  resourceSelectors:
  - apiVersion: rbac.authorization.k8s.io/v1
    kind: ClusterRole
  - apiVersion: rbac.authorization.k8s.io/v1
    kind: ClusterRoleBinding
  placement:
    clusterAffinity:
      clusterNames:
      - master
      - branch
    replicaScheduling:
      replicaDivisionPreference: Aggregated
      replicaSchedulingType: Duplicated`
            };

            document.getElementById('modalTitle').textContent = `策略详情 - ${policyName}`;
            document.getElementById('modalContent').innerHTML = `<pre class="text-sm">${yamlContent[policyName] || '策略内容加载中...'}</pre>`;
            document.getElementById('policyModal').classList.remove('hidden');
        }

        // 删除策略
        function deletePolicy(policyName) {
            if (confirm(`确定要删除策略 "${policyName}" 吗？此操作不可撤销。`)) {
                alert(`策略 "${policyName}" 已删除`);
            }
        }

        // 关闭模态框
        function closeModal() {
            document.getElementById('policyModal').classList.add('hidden');
        }

        // ESC键关闭模态框
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeModal();
            }
        });
    </script>
</body>
</html> 