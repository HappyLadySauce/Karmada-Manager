<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Karmada-Manager - 集群详情</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'karmada-blue': '#1B4F72',
                        'karmada-light': '#3498DB',
                        'karmada-green': '#27AE60',
                        'karmada-orange': '#F39C12',
                        'karmada-red': '#E74C3C'
                    }
                }
            }
        }
    </script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .sidebar {
            width: 280px;
            min-height: 100vh;
            background: linear-gradient(180deg, #1B4F72 0%, #2C3E50 100%);
        }
        .main-content {
            margin-left: 280px;
            min-height: 100vh;
            background: #f8fafc;
        }
        .node-card {
            transition: all 0.3s ease;
        }
        .node-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .tab-button.active {
            background-color: #1B4F72;
            color: white;
        }
    </style>
</head>
<body class="bg-gray-100">
    <!-- 侧边栏 -->
    <div class="sidebar fixed left-0 top-0 text-white shadow-xl z-10">
        <div class="p-6 border-b border-blue-600">
            <div class="flex items-center">
                <i class="fas fa-cubes text-3xl text-blue-300 mr-3"></i>
                <div>
                    <h1 class="text-xl font-bold">Karmada-Manager</h1>
                    <p class="text-blue-300 text-sm">多集群管理平台</p>
                </div>
            </div>
        </div>

        <nav class="mt-6">
            <a href="overview.html" class="flex items-center px-6 py-3 hover:bg-blue-600 hover:bg-opacity-30 transition-colors">
                <i class="fas fa-tachometer-alt w-5 mr-3"></i>
                <span>系统概览</span>
            </a>
            <a href="clusters.html" class="flex items-center px-6 py-3 hover:bg-blue-600 hover:bg-opacity-30 transition-colors">
                <i class="fas fa-cubes w-5 mr-3"></i>
                <span>集群管理</span>
            </a>
            <a href="workload-scheduling.html" class="flex items-center px-6 py-3 hover:bg-blue-600 hover:bg-opacity-30 transition-colors">
                <i class="fas fa-project-diagram w-5 mr-3"></i>
                <span>调度可视化</span>
            </a>
            <a href="policy-management.html" class="flex items-center px-6 py-3 hover:bg-blue-600 hover:bg-opacity-30 transition-colors">
                <i class="fas fa-shield-alt w-5 mr-3"></i>
                <span>策略管理</span>
            </a>
            <div class="px-6 py-2 text-blue-300 text-sm font-medium mt-8">
                成员集群
            </div>
            <a href="cluster-detail.html" class="flex items-center px-6 py-2 bg-blue-600 bg-opacity-50 border-r-4 border-blue-300 text-sm">
                <i class="fas fa-server w-4 mr-3 text-green-400"></i>
                <span class="font-medium">master</span>
                <span class="ml-auto text-xs bg-green-500 px-2 py-1 rounded">Ready</span>
            </a>
            <a href="#" class="flex items-center px-6 py-2 hover:bg-blue-600 hover:bg-opacity-30 transition-colors text-sm">
                <i class="fas fa-server w-4 mr-3 text-green-400"></i>
                <span>branch</span>
                <span class="ml-auto text-xs bg-green-500 px-2 py-1 rounded">Ready</span>
            </a>
        </nav>

        <div class="absolute bottom-6 left-6 right-6">
            <div class="bg-blue-600 bg-opacity-30 rounded-lg p-4">
                <div class="flex items-center mb-2">
                    <i class="fas fa-user-circle mr-2"></i>
                    <span class="font-medium">张伟</span>
                </div>
                <div class="text-blue-300 text-sm">平台运维工程师</div>
            </div>
        </div>
    </div>

    <!-- 主内容区域 -->
    <div class="main-content">
        <!-- 顶部导航栏 -->
        <header class="bg-white shadow-sm border-b px-6 py-4">
            <div class="flex justify-between items-center">
                <div class="flex items-center">
                    <a href="clusters.html" class="text-karmada-blue hover:text-blue-700 mr-4">
                        <i class="fas fa-arrow-left"></i>
                    </a>
                    <div>
                        <h2 class="text-2xl font-bold text-gray-800">集群详情 - master</h2>
                        <p class="text-gray-600">生产环境集群详细信息和监控</p>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="flex items-center text-sm text-green-600">
                        <div class="w-3 h-3 bg-green-500 rounded-full mr-2 animate-pulse"></div>
                        <span>Ready</span>
                    </div>
                    <button class="bg-karmada-blue text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                        <i class="fas fa-sync-alt mr-2"></i>刷新
                    </button>
                </div>
            </div>
        </header>

        <!-- 主要内容 -->
        <main class="p-6">
            <!-- 集群基本信息 -->
            <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                <h3 class="text-xl font-bold text-gray-800 mb-6">
                    <i class="fas fa-info-circle text-karmada-blue mr-2"></i>集群基本信息
                </h3>

                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <div class="text-center lg:text-left">
                        <div class="flex items-center justify-center lg:justify-start mb-2">
                            <img src="https://images.unsplash.com/photo-1558494949-ef010cbdcc31?w=60&h=60&fit=crop&crop=center" 
                                 alt="Kubernetes" class="w-12 h-12 rounded-lg mr-3">
                            <div>
                                <h4 class="text-lg font-bold text-gray-800">master</h4>
                                <p class="text-sm text-gray-600">v1.30.11+rke2r1</p>
                            </div>
                        </div>
                    </div>

                    <div>
                        <h5 class="text-sm font-medium text-gray-600 mb-2">集群状态</h5>
                        <div class="flex items-center">
                            <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium">Ready</span>
                        </div>
                        <p class="text-xs text-gray-500 mt-1">同步模式: Push</p>
                    </div>

                    <div>
                        <h5 class="text-sm font-medium text-gray-600 mb-2">创建时间</h5>
                        <p class="text-sm text-gray-800">2025-05-19 13:18:34</p>
                        <p class="text-xs text-gray-500">15小时前</p>
                    </div>

                    <div>
                        <h5 class="text-sm font-medium text-gray-600 mb-2">集群标签</h5>
                        <div class="flex flex-wrap gap-1">
                            <span class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded">生产环境</span>
                            <span class="text-xs bg-purple-100 text-purple-800 px-2 py-1 rounded">rke2</span>
                            <span class="text-xs bg-gray-100 text-gray-800 px-2 py-1 rounded">linux/amd64</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 资源统计 -->
            <div class="grid grid-cols-1 lg:grid-cols-4 gap-6 mb-6">
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h4 class="text-lg font-bold text-gray-800">节点</h4>
                        <i class="fas fa-server text-2xl text-karmada-blue"></i>
                    </div>
                    <div class="text-center">
                        <p class="text-3xl font-bold text-karmada-blue">5</p>
                        <p class="text-sm text-gray-600">全部就绪 (5/5)</p>
                        <div class="w-full bg-gray-200 rounded-full h-2 mt-2">
                            <div class="bg-green-500 h-2 rounded-full" style="width: 100%"></div>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow-lg p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h4 class="text-lg font-bold text-gray-800">CPU</h4>
                        <i class="fas fa-microchip text-2xl text-orange-600"></i>
                    </div>
                    <div class="text-center">
                        <p class="text-3xl font-bold text-orange-600">55.6%</p>
                        <p class="text-sm text-gray-600">11.1/20 核</p>
                        <div class="w-full bg-gray-200 rounded-full h-2 mt-2">
                            <div class="bg-orange-500 h-2 rounded-full" style="width: 55.6%"></div>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow-lg p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h4 class="text-lg font-bold text-gray-800">内存</h4>
                        <i class="fas fa-memory text-2xl text-red-600"></i>
                    </div>
                    <div class="text-center">
                        <p class="text-3xl font-bold text-red-600">53.7%</p>
                        <p class="text-sm text-gray-600">9.2/17.2 GB</p>
                        <div class="w-full bg-gray-200 rounded-full h-2 mt-2">
                            <div class="bg-red-500 h-2 rounded-full" style="width: 53.7%"></div>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow-lg p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h4 class="text-lg font-bold text-gray-800">Pod</h4>
                        <i class="fas fa-cube text-2xl text-purple-600"></i>
                    </div>
                    <div class="text-center">
                        <p class="text-3xl font-bold text-purple-600">7.1%</p>
                        <p class="text-sm text-gray-600">39/550 个</p>
                        <div class="w-full bg-gray-200 rounded-full h-2 mt-2">
                            <div class="bg-purple-500 h-2 rounded-full" style="width: 7.1%"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 标签页导航 -->
            <div class="bg-white rounded-xl shadow-lg overflow-hidden">
                <div class="border-b border-gray-200">
                    <nav class="flex">
                        <button onclick="showTab('nodes')" class="tab-button active px-6 py-3 text-sm font-medium border-r border-gray-200 hover:bg-gray-50 transition-colors">
                            <i class="fas fa-server mr-2"></i>节点列表
                        </button>
                        <button onclick="showTab('workloads')" class="tab-button px-6 py-3 text-sm font-medium border-r border-gray-200 hover:bg-gray-50 transition-colors">
                            <i class="fas fa-cube mr-2"></i>工作负载
                        </button>
                        <button onclick="showTab('events')" class="tab-button px-6 py-3 text-sm font-medium border-r border-gray-200 hover:bg-gray-50 transition-colors">
                            <i class="fas fa-history mr-2"></i>事件日志
                        </button>
                        <button onclick="showTab('monitoring')" class="tab-button px-6 py-3 text-sm font-medium hover:bg-gray-50 transition-colors">
                            <i class="fas fa-chart-line mr-2"></i>监控图表
                        </button>
                    </nav>
                </div>

                <!-- 节点列表标签页 -->
                <div id="nodes" class="tab-content active p-6">
                    <div class="grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6">
                        <!-- 节点卡片 1 -->
                        <div class="node-card bg-gray-50 rounded-lg p-4 hover:shadow-md transition-all cursor-pointer" onclick="viewNodeDetail('m-rke2-master01.example.com')">
                            <div class="flex items-center justify-between mb-3">
                                <h5 class="font-bold text-gray-800 truncate">m-rke2-master01.example.com</h5>
                                <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-xs">Ready</span>
                            </div>
                            
                            <div class="space-y-2 text-sm">
                                <div class="flex justify-between">
                                    <span class="text-gray-600">角色:</span>
                                    <span class="text-blue-600">Control Plane</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">CPU:</span>
                                    <span>1710m/4 (42.8%)</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">内存:</span>
                                    <span>1.8G/3.9G (45.8%)</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Pod:</span>
                                    <span>19/110 (17.3%)</span>
                                </div>
                            </div>
                            
                            <div class="mt-3 space-y-1">
                                <div class="flex justify-between text-xs text-gray-600">
                                    <span>CPU 利用率</span>
                                    <span>42.8%</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-1">
                                    <div class="bg-orange-500 h-1 rounded-full" style="width: 42.8%"></div>
                                </div>
                            </div>
                        </div>

                        <!-- 节点卡片 2 -->
                        <div class="node-card bg-gray-50 rounded-lg p-4 hover:shadow-md transition-all cursor-pointer">
                            <div class="flex items-center justify-between mb-3">
                                <h5 class="font-bold text-gray-800 truncate">m-rke2-master02.example.com</h5>
                                <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-xs">Ready</span>
                            </div>
                            
                            <div class="space-y-2 text-sm">
                                <div class="flex justify-between">
                                    <span class="text-gray-600">角色:</span>
                                    <span class="text-blue-600">Control Plane</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">CPU:</span>
                                    <span>1420m/4 (35.5%)</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">内存:</span>
                                    <span>1.5G/3.9G (38.5%)</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Pod:</span>
                                    <span>16/110 (14.5%)</span>
                                </div>
                            </div>
                            
                            <div class="mt-3 space-y-1">
                                <div class="flex justify-between text-xs text-gray-600">
                                    <span>CPU 利用率</span>
                                    <span>35.5%</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-1">
                                    <div class="bg-green-500 h-1 rounded-full" style="width: 35.5%"></div>
                                </div>
                            </div>
                        </div>

                        <!-- 节点卡片 3 -->
                        <div class="node-card bg-gray-50 rounded-lg p-4 hover:shadow-md transition-all cursor-pointer">
                            <div class="flex items-center justify-between mb-3">
                                <h5 class="font-bold text-gray-800 truncate">m-rke2-worker01.example.com</h5>
                                <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-xs">Ready</span>
                            </div>
                            
                            <div class="space-y-2 text-sm">
                                <div class="flex justify-between">
                                    <span class="text-gray-600">角色:</span>
                                    <span class="text-gray-600">Worker</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">CPU:</span>
                                    <span>2100m/4 (52.5%)</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">内存:</span>
                                    <span>2.2G/3.9G (56.4%)</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Pod:</span>
                                    <span>25/110 (22.7%)</span>
                                </div>
                            </div>
                            
                            <div class="mt-3 space-y-1">
                                <div class="flex justify-between text-xs text-gray-600">
                                    <span>CPU 利用率</span>
                                    <span>52.5%</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-1">
                                    <div class="bg-orange-500 h-1 rounded-full" style="width: 52.5%"></div>
                                </div>
                            </div>
                        </div>

                        <!-- 更多节点... -->
                        <div class="col-span-full text-center py-4">
                            <p class="text-gray-600">显示 3 / 5 个节点</p>
                            <button class="text-karmada-blue hover:underline mt-2">查看全部节点</button>
                        </div>
                    </div>
                </div>

                <!-- 工作负载标签页 -->
                <div id="workloads" class="tab-content p-6">
                    <div class="space-y-4">
                        <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                            <div class="flex items-center">
                                <i class="fas fa-cube text-karmada-blue mr-3"></i>
                                <div>
                                    <h6 class="font-medium">higress-console</h6>
                                    <p class="text-sm text-gray-600">Deployment • higress-system</p>
                                </div>
                            </div>
                            <div class="text-right">
                                <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-xs">Running</span>
                                <p class="text-sm text-gray-600 mt-1">1/1 Pod</p>
                            </div>
                        </div>

                        <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                            <div class="flex items-center">
                                <i class="fas fa-cube text-karmada-blue mr-3"></i>
                                <div>
                                    <h6 class="font-medium">higress-gateway</h6>
                                    <p class="text-sm text-gray-600">Deployment • higress-system</p>
                                </div>
                            </div>
                            <div class="text-right">
                                <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-xs">Running</span>
                                <p class="text-sm text-gray-600 mt-1">1/1 Pod</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 事件日志标签页 -->
                <div id="events" class="tab-content p-6">
                    <div class="space-y-4">
                        <div class="flex items-start space-x-4 p-3 bg-gray-50 rounded-lg">
                            <div class="w-2 h-2 bg-green-500 rounded-full mt-2 flex-shrink-0"></div>
                            <div class="flex-1">
                                <p class="text-sm text-gray-800">节点 m-rke2-master01 Ready 状态更新</p>
                                <p class="text-xs text-gray-600">Normal • 2分钟前</p>
                            </div>
                        </div>

                        <div class="flex items-start space-x-4 p-3 bg-gray-50 rounded-lg">
                            <div class="w-2 h-2 bg-blue-500 rounded-full mt-2 flex-shrink-0"></div>
                            <div class="flex-1">
                                <p class="text-sm text-gray-800">Pod higress-gateway-68d974f7b5-cbd59 启动成功</p>
                                <p class="text-xs text-gray-600">Normal • 15分钟前</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 监控图表标签页 -->
                <div id="monitoring" class="tab-content p-6">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div>
                            <h5 class="text-lg font-bold mb-4">CPU 使用率</h5>
                            <canvas id="cpuChart" width="400" height="200"></canvas>
                        </div>
                        <div>
                            <h5 class="text-lg font-bold mb-4">内存使用率</h5>
                            <canvas id="memoryChart" width="400" height="200"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // 标签页切换
        function showTab(tabId) {
            // 隐藏所有标签页内容
            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            // 移除所有标签按钮的激活状态
            const buttons = document.querySelectorAll('.tab-button');
            buttons.forEach(button => button.classList.remove('active'));
            
            // 显示选中的标签页
            document.getElementById(tabId).classList.add('active');
            
            // 激活选中的标签按钮
            event.target.closest('.tab-button').classList.add('active');
            
            // 如果是监控标签，初始化图表
            if (tabId === 'monitoring') {
                initCharts();
            }
        }

        // 查看节点详情
        function viewNodeDetail(nodeName) {
            if (nodeName === 'm-rke2-master01.example.com') {
                window.open('node-detail.html', '_blank');
            } else {
                alert(`查看节点 ${nodeName} 详情`);
            }
        }

        // 初始化监控图表
        function initCharts() {
            // CPU 图表
            const cpuCtx = document.getElementById('cpuChart');
            if (cpuCtx && !cpuCtx.chart) {
                cpuCtx.chart = new Chart(cpuCtx, {
                    type: 'line',
                    data: {
                        labels: ['00:00', '04:00', '08:00', '12:00', '16:00', '20:00', '24:00'],
                        datasets: [{
                            label: 'CPU 使用率 (%)',
                            data: [42, 48, 45, 55, 52, 58, 55],
                            borderColor: '#F39C12',
                            backgroundColor: 'rgba(243, 156, 18, 0.1)',
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 100
                            }
                        }
                    }
                });
            }

            // 内存图表
            const memoryCtx = document.getElementById('memoryChart');
            if (memoryCtx && !memoryCtx.chart) {
                memoryCtx.chart = new Chart(memoryCtx, {
                    type: 'line',
                    data: {
                        labels: ['00:00', '04:00', '08:00', '12:00', '16:00', '20:00', '24:00'],
                        datasets: [{
                            label: '内存使用率 (%)',
                            data: [38, 42, 40, 54, 48, 56, 53],
                            borderColor: '#E74C3C',
                            backgroundColor: 'rgba(231, 76, 60, 0.1)',
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 100
                            }
                        }
                    }
                });
            }
        }

        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 默认显示节点标签页
            showTab('nodes');
        });
    </script>
</body>
</html> 